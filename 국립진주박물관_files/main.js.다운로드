$(function(){
	//visual
	var visualSlick =$('.visual_list .list');

	visualSlick.slick({
		autoplay : true,
		speed : 1000,
		fade : true,
		dots:true,
		arrows:false,
		appendDots : $('.visual_list .control .dots'),
		pauseOnDotsHover : true,
		swipe:false,
		draggable:false,
		responsive: [
		{
			breakpoint: 1000,
			settings: {
				arrows:false,	
				swipe:true,
				draggable:true,
				touchMove:true
			}
		}
		]
	});

	$('.visual_list .control .pause').on('click', function(event) {
		$('.visual_list .control .play').show().focus();
		$('.visual_list .control .pause').hide();
		visualSlick.slick('slickPause').slick('slickSetOption', 'pauseOnDotsHover', false);
	});
	$('.visual_list .control .play').on('click', function(event) {
		$('.visual_list .control .pause').show().focus();
		$('.visual_list .control .play').hide();
		visualSlick.slick('slickPlay').slick('slickSetOption', 'pauseOnDotsHover', true);
	});


	var popupSlick =$('.popup .list');

	popupSlick.slick({
		swipe:false,
		draggable:false,
		autoplay : true,
		speed : 2000,
		fade : true,
		dots:true,
		arrows:false,
		appendDots : $('.popup .control .dots'),
		pauseOnDotsHover : true,
		responsive: [
		{
			breakpoint: 1000,
			settings: {
				arrows:false,	
				swipe:true,
				draggable:true,
				touchMove:true
			}
		}
		]
	});
	$('.popup .control .pause').on('click', function(event) {
		$('.popup .control .play').show().focus();
		$('.popup .control .pause').hide();
		visualSlick.slick('slickPause').slick('slickSetOption', 'pauseOnDotsHover', false);
	});
	$('.popup .control .play').on('click', function(event) {
		$('.popup .control .pause').show().focus();
		$('.popup .control .play').hide();
		visualSlick.slick('slickPlay').slick('slickSetOption', 'pauseOnDotsHover', true);
	});


	/*----------  Filter  ----------*/
	$('.edu_nav .inner button').bind('click', function(e){
		var filter = $(this).val();
		var key = "."+filter;
		$('.edu_nav button').removeClass('active').removeAttr('title');
		$(this).addClass('active').attr('title','선택됨');

		// 모바일 사용
		var current_tab = $(this).text();
		$('.edu_nav .active_btn').text(current_tab)
		$('.edu_nav').removeClass('active');
		$('.edu_nav .active_btn').removeClass('on')

		$('.edu_for').slick('slickUnfilter');
		$('.edu_for').slick('slickFilter',key).slick('refresh');
		$('.edu_for').slick('slickGoTo', 0);
		//$('.edu_for').slick('resize');

	});

	$(window).on("load", function(){
		$('.edu_nav .inner button:first-child').addClass('active');
		$('.edu_nav .inner button.active').attr('title','선택됨');

		//모바일 사용
		var current_tab = $('.edu_nav .inner button:first-child').text();
		$('.edu_nav .active_btn').text(current_tab)
	});

	/*----------  Carousel Slick ----------*/

	$('.edu_for').slick({
	infinite: false,
	dots: false,
	arrows: true,
	autoplay: false,
	slidesToShow: 4,
	slidesToScroll: 4,
	centerMode: false,
	mobileFirst: false,
	variableWidth: true,
	adaptiveHeight: false,
	focusOnSelect: true,
	responsive: [
		{
			breakpoint: 1700,
			settings: {
				slidesToShow: 4,
				slidesToScroll: 4,
				variableWidth: false

			}
		},
		{
			breakpoint: 1400,
			settings: {
				slidesToShow: 3,
				slidesToScroll: 3,
				variableWidth: false

			}
		},
		{
			breakpoint: 1200,
			settings: {
				slidesToShow: 2,
				slidesToScroll: 2,
				variableWidth: false

			}
		},


		{
			breakpoint: 800,
			settings: {
				slidesToShow: 1,
				slidesToScroll: 1,
				variableWidth: false

			}
		},

	]
	});

	/*----------  Filter  ----------*/
	$('.event_nav .inner button').bind('click', function(e){
		var filter = $(this).val();
		var key = "."+filter;
		$('.event_nav button').removeClass('active').removeAttr('title');
		$(this).addClass('active').attr('title','선택됨');
		// 모바일 사용
		var current_tab = $(this).text();
		$('.event_nav .active_btn').text(current_tab)
		$('.event_nav').removeClass('active');
		$('.event_nav .active_btn').removeClass('on')

		$('.event_for').slick('slickUnfilter');
		$('.event_for').slick('slickFilter',key).slick('refresh');
		$('.event_for').slick('slickGoTo', 0);
		//$('.event_for').slick('resize');

	});
	$(window).on("load", function(){
		$('.event_nav .inner button:first-child').addClass('active');
		$('.event_nav .inner button.active').attr('title','선택됨');
		
		//모바일 사용
		var current_tab = $('.event_nav .inner button:first-child').text();
		$('.event_nav .active_btn').text(current_tab)
	});

	/*----------  Carousel Slick ----------*/

	$('.event_for').slick({
	infinite: false,
	dots: false,
	arrows: true,
	autoplay: false,
	slidesToShow: 4,
	slidesToScroll: 4,
	centerMode: false,
	mobileFirst: false,
	variableWidth: true,
	adaptiveHeight: false,
	focusOnSelect: true,
	responsive: [
		{
			breakpoint: 1700,
			settings: {
				slidesToShow: 4,
				slidesToScroll: 4,
				variableWidth: false

			}
		},
		{
			breakpoint: 1400,
			settings: {
				slidesToShow: 3,
				slidesToScroll: 3,
				variableWidth: false

			}
		},
		{
			breakpoint: 1200,
			settings: {
				slidesToShow: 2,
				slidesToScroll: 2,
				variableWidth: false

			}
		},
		{
			breakpoint: 800,
			settings: {
				slidesToShow: 1,
				slidesToScroll: 1,
				variableWidth: false

			}
		},

	]
	});


	var	offsetbox_total=$('[data-layer]').length;

	$(window).scroll(function(){
		for (var i=0;i<offsetbox_total;i++){
			var j=i+1;
			var k=i-1;
			
			if($('[data-layer]').eq(i).offset().top-$('#top_layout').height()<$(window).scrollTop()+200){
				$('[data-layer]').eq(i).addClass('active');
			};			
		};
	});

	// 인트로
    /*
	$(window).on("load", function(){
		$('#layer_popup .popup_wrap').addClass('active');
	});
    */
    /* 스크롤하면 사라짐
	$(window).scroll(function(){
		$('#layer_popup').hide();
	});
	$('#layer_popup .popup_close').on('click', function(){
		$('#layer_popup').hide();
	});
	*/
    /* 스크롤하면 사라짐(모바일은 제외)
    $(window).scroll(function(){
        var _windowWidth = $(window).width();
        if( _windowWidth > 768){
		$('#layer_popup').hide();
        } 
	});
    */
	$('#layer_popup .popup_close').on('click', function(){
		$('#layer_popup').hide();
	});
    
	// $('#layer_popup .link_area .list').slick({
	// dots: false,
	// arrows: false,
	// autoplay: false,
	// responsive: [
	// 	{
	// 		breakpoint: 9999,
	// 		settings: 'unslick'
	// 	}

	// ]
	// });
	//$('#layer_popup .link_area .list').slick('resize');
});

/*액티브 박스-공통*/
$(function(){
	$('.active_btn').attr('title','열기');
    
	$('.active_box button.active_btn').on('click', function() {
		var $this = $(this);console.log($this.attr('title'));
		if(!$this.hasClass('on')) {
			$this.parents('.active_box').addClass('active').find('.active_btn').attr('title','닫기').addClass('on');
		}else{
			$this.parents('.active_box').removeClass('active').find('.active_btn').attr('title','열기').removeClass('on');
		}
	});
	// $('.active_box').each(function(){
	// 	var activeBox = $(this);
 //        activeBox.focusout(function(){
	// 		if($(window).width()<767){
	// 			activeBox.removeClass('active').find('.active_btn').attr('title','열기').removeClass('on');
	// 		}
	// 	});
	// });

	//탭버튼 - 버튼, 콘텐츠 순차
	$('.board_tab').each(function(){

		var tab_layout = $(this),
		$tab = tab_layout.find('> .tab_list > .tab_cell'),
		$tab_btn = tab_layout.find('> .tab_list > .tab_cell > .tab_btn'),
		$tabContent = tab_layout.find('> .tab_list > .tab_cell > .tab_content');
		
		
		$(window).on("load", function(){
			//로드 됐을때 보여줄 탭. data-roadtab 속성 없을시 기본값 1
			if(!tab_layout.is('[data-roadtab]')){
				tab_layout.attr('data-roadtab','1');
			}
			var num = tab_layout.attr('data-roadtab');
			$tab.eq(num-1).addClass('active').find('.tab_btn').attr('title','선택됨');
		});

		$tab.bind("click",function(event){
			var this_eq = $tab.index( $(this) );
			$tab.removeClass('active').find('.tab_btn').removeAttr('title');
			$tab.eq(this_eq).addClass('active').find('.tab_btn').attr('title','선택됨');
			event.preventDefault();
		});
	});

	//탭버튼 - 버튼, 콘텐츠 분리
	$('.tab_layout').each(function(){

		var tab_layout = $(this),
		$tab = tab_layout.find('> .tab_button > ul > li'),
		$tab_btn = tab_layout.find('> .tab_button > ul > li > .tab_btn'),
		$tabContent = tab_layout.find(' > .tab_content');
		
		
		$(window).on("load", function(){
			//로드 됐을때 보여줄 탭. data-roadtab 속성 없을시 기본값 1
			if(!tab_layout.is('[data-roadtab]')){
				tab_layout.attr('data-roadtab','1');
			}

			var num = tab_layout.attr('data-roadtab');

			$tab_view = tab_layout.find(' > .tab_content.tab'+num);
			$tab.eq(num-1).addClass('active').find('.tab_btn').attr('title','선택됨');
			$tab_view.addClass('active');
		});

		$tab.bind("click",function(event){
			var this_eq = $tab.index( $(this) );
			$tab.removeClass('active').find('.tab_btn').removeAttr('title');
			$tab.eq(this_eq).addClass('active').find('.tab_btn').attr('title','선택됨');
			$tabContent.removeClass('active');
			tab_layout.find('.tab_content.tab'+(this_eq+1)).addClass('active');
			event.preventDefault();
		});
	});

});



$(function(){
    main_notice_AC();
});

function main_notice_AC(){
    var obj = $("#news .board");
        obj.li = obj.find(">ul>li");
        obj.btn = obj.li.find(">.tab_btn");
    function fn_set(idx){
        obj.li.removeClass("active").eq(idx).addClass("active");
    }
    obj.btn.click(function(){
        var idx = obj.li.index($(this).parent());
        fn_set(idx);
    });
    fn_set(0);
}

